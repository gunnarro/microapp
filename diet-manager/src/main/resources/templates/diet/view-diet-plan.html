<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
        <link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.7/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}" rel="stylesheet" media="screen" />
    	<link href="../static/css/dietmanager.css" th:href="@{/css/dietmanager.css}" rel="stylesheet" media="screen"/>
    	<link href="../static/css/dietmanager.css" th:href="@{/css/icomoon-icon-font.css}" rel="stylesheet" media="screen"/>
</head>
<body>
	<div th:replace="fragments/header-topmenu :: header-topmenu"></div>

	<div class="container-fluid">

		<ul class="breadcrumb">
        	<li><a th:href="@{/diet/listdietplans}" th:text="Diet Plans"></a></li>
        	<li class="active" th:text="Diet Plan"></li>
    	</ul>
    	
		<div class="page-header">
			<h4 th:text="${dietPlan.name} + ' ' + ${dietPlan.periode}"></h4>
			<h5 th:if="${dietPlan.active}" th:text="Aktiv"></h5>
			<h5 th:if="! ${dietPlan.active}" th:text="Ikke aktiv"></h5>
		</div>

		<table id="dietPlanTbl" class="table table-condensed">
			<c:set var="editIcon" value="glyphicon glyphicon-edit edit-color" />
			<c:set var="deleteIcon" value="glyphicon glyphicon-remove-circle delete-color" />
			
			<caption class="text-right">
				<small th:text="#{lbl.lastupdated} + ${#dates.format(#dates.createNow(), 'dd MMM yyyy HH:mm:ss')}"></small>
			</caption>
			
			<thead>
				<tr class="info">
					<th colspan="2" class="text-left">${dietPlan.description}</th>
					<%--
					<th class="text-right"><spring:url value="/diet/dietplan/edit/{dietPlanId}" var="editUrl" htmlEscape="true">
							<spring:param name="dietPlanId" value="${dietPlan.id}" />
						</spring:url> <a href="${fn:escapeXml(editUrl)}" class="btn btn-default btn-xs">
							<span class="${editIcon}"></span>
					</a></th>
					 --%>
				</tr>
			</thead>
			<tbody>
				<c:forEach var="keyValuePair" items="${dietPlan.planItems}">
					<c:set var="nameColor" value="label label-primary" />
					<c:set var="txtColor" value="text-primary" />
					<c:set var="eventIcon" value="glyphicon glyphicon-user" />
					<c:set var="editIcon" value="glyphicon glyphicon-edit edit-color" />
					<c:set var="deleteIcon" value="glyphicon glyphicon-remove-circle delete-color" />

					<c:choose>
						<c:when test="${fn:startsWith(keyValuePair.key, 'Frokost')}">
							<c:set var="nameColor" value="label label-danger" />
						</c:when>
						<c:when test="${fn:startsWith(keyValuePair.key, 'Lunsj')}">
							<c:set var="nameColor" value="label label-primary" />
						</c:when>
						<c:when test="${fn:startsWith(keyValuePair.key, 'Middag')}">
							<c:set var="nameColor" value="label label-success" />
						</c:when>
						<c:when test="${fn:startsWith(keyValuePair.key, 'Kvelds')}">
							<c:set var="nameColor" value="label label-info" />
						</c:when>
						<c:otherwise>
							<c:set var="nameColor" value="label label-warning" />
						</c:otherwise>
					</c:choose>

					<tr id="date_${agenda.id}" class="active">
						<td colspan="2" class="text-left">
							<span class="${nameColor}">${keyValuePair.key}</span>
						</td>
					</tr>

					<c:forEach var="agendaItem" items="${keyValuePair.value}">
						<c:set var="txtColor" value="text-muted" />
						<c:set var="playedIcon" value="glyphicon glyphicon-check" />
						<c:set var="editIcon" value="glyphicon glyphicon-edit muted-color" />
						<c:set var="deleteIcon" value="glyphicon glyphicon-remove-circle muted-color" />
						<tr id="row_${agenda.id}">
							<td colspan="2" class="text-left" style="border-top: none;">
								<small><i class="${playedIcon}"></i><span class="${txtColor}">&nbsp;${agendaItem}</span></small>
							</td>
						</tr>
					</c:forEach>
				</c:forEach>
			</tbody>
			<tfoot>
				<tr class="active">
						<td colspan="2" class="text-left">
							<span class="label label-default" th:text="Generelt/Regler"></span>
						</td>
				</tr>
				<tr>
					<td colspan="2">
						<small>
							<ul th:each="keyValuePair : ${dietPlan.dietPlanRules}">
								<li><span class="${txtColor}" th:text="${keyValuePair.value}"></span></li>
							</ul>
						</small>
							<small>
								Se <a th:href="@{/diet/changelist/} + ${dietPlan.id}" th:text="bytteliste"></a> for bytte av mat. 
						</small>
					</td>
				</tr>
				<tr class="info">
					<td colspan="2" class="text-right">
						<a th:href="@{/diet/listdietplans}" class="btn btn-primary btn-sm" th:text=#{btn.cancel}></a>
					</td>
				</tr>
			</tfoot>
		</table>

		<!-- end container -->
		<div th:replace="fragments/footer :: footer"></div>
	</div>
</body>
</html>