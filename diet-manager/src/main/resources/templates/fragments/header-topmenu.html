<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <head th:fragment="scripts">
  </head>
  <body>
    <div class="page-margin" th:fragment="header-topmenu">
    	<nav role="navigation" class="navbar navbar-default">
	    	<!-- Brand and toggle get grouped for better mobile display -->
	    	<div class="navbar-header">
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbarCollapse">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
				</button>
				<a th:href="@{/diet/mystatus}">
					<img th:src="@{/images/logo-pepilie.gif}" align="middle"/>
				</a>
			</div>
    		<!-- Collection of nav links and other content for toggling -->
			<div id="navbarCollapse" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
		            <li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/mystatus}"><i class="icon-happy2"></i> <span th:text="#{topmenu.status}" ></span></a></li>
		            <li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/dietplan/current}"><i class="glyphicon glyphicon-list"></i> <span th:text="#{topmenu.dietplan}"></span></a></li>
					<li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/menu/current}"><i class="glyphicon glyphicon-list"></i> <span th:text="#{topmenu.menu}"></span></a></li>
					<li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/recipes}"><i class="glyphicon glyphicon-list"></i> <span th:text="#{topmenu.recipes}"></span></a></li>
					<li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/changelist}"><i class="glyphicon glyphicon-list"></i> <span th:text="#{topmenu.changelist}"></span></a></li>
					<li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/mychoices}"><i class="glyphicon glyphicon-check"></i> <span th:text="#{topmenu.mychoices}"></span></a></li>
					<li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/activity}"><i class="glyphicon glyphicon-stats"></i> <span th:text="#{topmenu.activity}"></span></a></li>
					<li th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/body/measurement/log}"><i class="glyphicon glyphicon-stats"></i> <span th:text="#{topmenu.measurements}"></span></a></li>
					<li th:if="${#authorization.expression('isAuthenticated()')}" th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/image-manager/gallery}"><i class="glyphicon glyphicon-picture"></i> <span th:text="#{topmenu.gallery}"></span></a></li>
					<li th:if="${#authorization.expression('isAuthenticated()')}" th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/calendar-manager/calendar/listevents/false/week/0/all/all}"><i class="glyphicon glyphicon-calendar"></i> <span th:text="#{topmenu.calendar}"></span></a></li>
					<li th:if="${#authorization.expression('isAuthenticated()')}" th:classappend="${module == 'home' ? 'active' : ''}"><a th:href="@{/diet/log/events}"><i class="glyphicon glyphicon-list-alt"></i> <span th:text="#{topmenu.log}"></span></a></li>
	          	</ul>
            
	            <ul class="nav navbar-nav">
	                <li class="dropdown">
	                    <a data-toggle="dropdown" class="dropdown-toggle" href="#" th:text="#{lbl.language}"><b class="caret"></b></a>
	                    <ul class="dropdown-menu">
	                        <li><a class="dropdown-item" th:href="@{?lang=en}"><i class="glyphicon glyphicon-list-alt"></i> <span th:text="#{lbl.language.en}"></span></a></li>
	                        <li><a class="dropdown-item" th:href="@{?lang=no}"><i class="glyphicon glyphicon-list-alt"></i> <span th:text="#{lbl.language.no}"></span></a></li>
	                    </ul>
	                </li>
	            </ul>
            
		        <ul class="nav navbar-nav navbar-right">
		            <li th:if="${#authorization.expression('!isAuthenticated()')}">
		              <a href="/signin" th:href="@{/signin}">
		              	<i class="glyphicon glyphicon-log-in"></i> <span th:text="#{lbl.signin}"></span>
		              </a>
		            </li>
		            <li><a href="#"><i class="${userIcon}"></i><span th:text="${#authentication.getPrincipal().getUsername()}"></span></a></li> 
					<li><a href="#">|</a></li>
		            <li th:if="${#authorization.expression('isAuthenticated()')}">
		              <a href="/logout" th:href="@{#}" onclick="$('#form').submit();">
		                <i class="glyphicon glyphicon-log-out"></i> <span th:text="#{lbl.logout}"></span>
		              </a>
		             <form style="visibility: hidden" id="form" method="post" action="#" th:action="@{/logout}"></form>
		            </li>
		        </ul>
        	</div>
        </nav>
      </div>
  </body>
</html>